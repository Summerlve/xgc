var resultItem=Backbone.Model.extend({defaults:{timeRange:"",isAllow:"",kind:"",reason:""}}),resultList=Backbone.Collection.extend({model:resultItem,localStorage:new Backbone.LocalStorage("results")}),results=new resultList,appView=Backbone.View.extend({template:_.template($("#appView").html()),render:function(){return this.$el.html(this.template()),this}}),App=new appView,applyView=Backbone.View.extend({template:_.template($("#applyView").html()),events:{"click .my-wechatHoli-returnBtn":"returnBtnClick"},initialize:function(){_.bindAll(this,"returnBtnClick")},render:function(){return this.$el.html(this.template()),this},returnBtnClick:function(){this.remove(),router.navigate("",{trigger:!0,replace:!0})},timePickerInit:function(){var e=$(".my-wecharHoli-formDatetimeBg"),t=$(".my-wecharHoli-formDatetimeEd"),i=$(".my-dataPikrRm"),n=$("form button[type='submit']"),r=new Date(Date.parse(new Date)+18e5);0!==e.length&&($.fn.datetimepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",suffix:[],meridiem:["上午","下午"]},e.datetimepicker({language:"zh-CN",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1,startDate:r,format:"yyyy-mm-dd hh:ii"}).on("changeDate",function(){t.datetimepicker("setStartDate",$("#timeBg").val())}),t.datetimepicker({language:"zh-CN",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,showMeridian:1,startDate:r,format:"yyyy-mm-dd hh:ii"}).on("changeDate",function(){e.datetimepicker("setEndDate",$("#timeEd").val())}),i.on("click",function(){r=new Date(Date.parse(new Date)+18e5),e.datetimepicker("setEndDate",null),t.datetimepicker("setStartDate",r);var i=$(this).prev("input");i.val("")}),n.on("click",function(){console.log("`132");var e=$(".form-control"),t=!0;return _.each(e,function(e){$(e).val()||(t=!1)}),t===!1?(alert("请填写完申请"),!1):void 0}))}}),apply=new applyView,resultView=Backbone.View.extend({template:_.template($("#resultView").html()),events:{"click .my-wechatHoli-returnBtn":"returnBtnClick"},initialize:function(){_.bindAll(this,"returnBtnClick"),results.fetch()},render:function(){var e=new resultTableView;return this.$el.html(this.template()).find(".my-wechatHoli-content").append(e.render().el),this},returnBtnClick:function(){this.remove(),router.navigate("",{trigger:!0,replace:!0})}}),result=new resultView,resultTableView=Backbone.View.extend({tagName:"table",className:"table",initialize:function(){_.bindAll(this,"addOne")},render:function(){return results.each(this.addOne),this},addOne:function(e){var t=new resultItemView({model:e});this.$el.append(t.render().el)}}),resultItemView=Backbone.View.extend({tagName:"tr",template:_.template($("#resultItemView").html()),events:{"click a":"details"},initialize:function(){_.bindAll(this,"render","details")},render:function(){var e={};return e.timeRange=this.model.get("timeRange"),e.isAllow=this.model.get("isAllow"),this.$el.html(this.template(e)),this},details:function(e){e.preventDefault();var t=new detailsView({model:this.model});result.remove(),$("body").prepend(t.render().el)}}),detailsView=Backbone.View.extend({template:_.template($("#detailsView").html()),events:{"click .my-wechatHoli-returnBtn":"returnBtnClick"},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},returnBtnClick:function(){this.remove(),result=new resultView,$("body").prepend(result.render().el)}}),previousView=null,appRouter=Backbone.Router.extend({routes:{"":"AppInit",apply:"apply",result:"result"},initialize:function(){Backbone.history.start()},apply:function(){App.remove(),apply=new applyView,previousView=apply,$("body").prepend(apply.render().el).removeClass("my-wechatHoli-body"),apply.timePickerInit()},result:function(){App.remove(),result=new resultView,previousView=result,$("body").prepend(result.render().el).removeClass("my-wechatHoli-body")},AppInit:function(){null!==previousView&&previousView.remove(),$("body").prepend(App.render().el).addClass("my-wechatHoli-body")}}),router=new appRouter;